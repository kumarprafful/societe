{% extends '../generics/base.html' %}

{% block body %}

{% include './cust_nav.html' %}

<div class="container">

  <div class="">
    <h4>Filters</h4>
    Group by
    <form class="" method="post" onchange=handleSubmit(event)>
      {% csrf_token %}
      <select class="month-selector" name="">
        <optgroup label="Months">
          <option value="1">January</option>
          <option value="2">February</option>
          <option value="3">March</option>
          <option value="4">April</option>
          <option value="5">May</option>
          <option value="6">June</option>
          <option value="7">July</option>
          <option value="8">August</option>
          <option value="9">September</option>
          <option value="10">October</option>
          <option value="11">November</option>
          <option value="12">December</option>
        </optgroup>
      </select>
      <input type="submit" name="submit" id="month_submit" hidden>
    </form>
    <a href="" id="a_id" >lkjf</a>
  </div>

  <table class="highlight">
    <thead>
      <tr>
        <th>Name</th>
        <th>Month</th>
        <th>Previous Share</th>
        <th>Previous Loan</th>
        <th>Share</th>
        <th>Total Share</th>
        <th>Installment</th>
        <th>Balance Loan</th>
        <th>Interest</th>
        <th>Late Fees</th>
        <th>Total Amount</th>
        <th>get previos data</th>


      </tr>
    </thead>
    <tbody>
      {% for record in monthly_records %}
        <tr>
          <td>{{record}}</td>
          <td>{{record.month}}</td>
          <td>{{record.previous_share}}</td>
          <td>{{record.previous_loan}}</td>
          <td>{{record.share}}</td>
          <td>{{record.total_share}}</td>
          <td>{{record.installment}}</td>
          <td>{{record.balance_loan}}</td>
          <td>{{record.interest}}</td>
          <td>{{record.late_fees}}</td>
          <td>{{record.total_amount}}</td>

          <td><a class="" href="{% url 'record:change-prev-data' slug=society.slug id=record.member.id month=record.month %}">fill installment</a></td>


        </tr>
      {% endfor %}
    </tbody>

  </table>



</div>


<script type="text/javascript">

$(document).ready(function(){
    $('.modal').modal();
  });
  handleSubmit = (e) => {
    e.preventDefault();
    // console.log(e.target.value);
    const sub =  document.getElementById("month_submit");
    sub.value=e.target.value;
    // sub.click();
    const society_id = {{society.id}};
    const a = document.getElementById("a_id");
    a.href = `${e.target.value}/`;
    console.log(`a ${2+2}`);



  }
</script>

{% endblock%}
